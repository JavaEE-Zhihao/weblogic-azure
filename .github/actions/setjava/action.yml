name: "Set maven and jdk"
description: "Set maven and jdk"
inputs:
  server-password:
    description: "Server password for github packages maven repository"
    required: true
runs:
  using: "composite"
  steps:
    - name: Set up Apache Maven and JDK
      uses: actions/setup-java@v1
      with:
        java-version: 1.8
        server-id: github # Value of the distributionManagement/repository/id field of the pom.xml
        server-username: MAVEN_USERNAME # env variable for username
        server-password: MAVEN_TOKEN # env variable for token
    - name: Set Maven env
      shell: bash
      env:
        MAVEN_USERNAME: github
        MAVEN_TOKEN: ${{ inputs.GITHUB_TOKEN }}
      run: |
        echo "MAVEN_USERNAME=${MAVEN_USERNAME}" >> $GITHUB_ENV
        echo "MAVEN_TOKEN=${MAVEN_TOKEN}" >> $GITHUB_ENV
